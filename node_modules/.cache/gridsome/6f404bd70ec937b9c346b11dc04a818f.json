{"remainingRequest":"/home/simplonco/Bureau/my-first-wp-project/node_modules/babel-loader/lib/index.js??ref--1-1!/home/simplonco/Bureau/my-first-wp-project/node_modules/gridsome/app/graphql/guard.js","dependencies":[{"path":"/home/simplonco/Bureau/my-first-wp-project/node_modules/gridsome/app/graphql/guard.js","mtime":499162500000},{"path":"/home/simplonco/Bureau/my-first-wp-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/simplonco/Bureau/my-first-wp-project/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import fetch from \"../fetch\";\nimport { getResults, setResults, formatError } from \"./shared\";\nexport default (function (to, from, next) {\n  if (process.isServer) return next();\n\n  if (process.isProduction && global.__INITIAL_STATE__) {\n    setResults(to.path, global.__INITIAL_STATE__);\n    global.__INITIAL_STATE__ = null;\n    return next();\n  } else if (getResults(to.path)) {\n    return next();\n  }\n\n  fetch(to).then(function (res) {\n    if (res.code === 404) {\n      setResults(to.path, {\n        data: null,\n        context: {}\n      });\n      next({\n        name: '*',\n        params: {\n          0: to.path\n        }\n      });\n    } else {\n      setResults(to.path, res);\n      next();\n    }\n  }).catch(function (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      console.error(err); // eslint-disable-line\n\n      next({\n        name: '*',\n        params: {\n          0: to.path\n        }\n      });\n    } else if (err.code === 404 && to.path !== window.location.pathname) {\n      // reload page if coming from another page and data doesn't exist\n      window.location.assign(to.fullPath);\n    } else {\n      formatError(err, to);\n      next(err);\n    }\n  });\n});",{"version":3,"sources":["/home/simplonco/Bureau/my-first-wp-project/node_modules/gridsome/app/graphql/guard.js"],"names":["fetch","getResults","setResults","formatError","to","from","next","process","isServer","isProduction","global","__INITIAL_STATE__","path","then","res","code","data","context","name","params","catch","err","console","error","window","location","pathname","assign","fullPath"],"mappings":"AAAA,OAAOA,KAAP;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,WAAjC;AAEA,gBAAe,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACjC,MAAIC,OAAO,CAACC,QAAZ,EAAsB,OAAOF,IAAI,EAAX;;AAEtB,MAAIC,OAAO,CAACE,YAAR,IAAwBC,MAAM,CAACC,iBAAnC,EAAsD;AACpDT,IAAAA,UAAU,CAACE,EAAE,CAACQ,IAAJ,EAAUF,MAAM,CAACC,iBAAjB,CAAV;AACAD,IAAAA,MAAM,CAACC,iBAAP,GAA2B,IAA3B;AACA,WAAOL,IAAI,EAAX;AACD,GAJD,MAIO,IAAIL,UAAU,CAACG,EAAE,CAACQ,IAAJ,CAAd,EAAyB;AAC9B,WAAON,IAAI,EAAX;AACD;;AAEDN,EAAAA,KAAK,CAACI,EAAD,CAAL,CACGS,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,QAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;AACpBb,MAAAA,UAAU,CAACE,EAAE,CAACQ,IAAJ,EAAU;AAAEI,QAAAA,IAAI,EAAE,IAAR;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OAAV,CAAV;AACAX,MAAAA,IAAI,CAAC;AAAEY,QAAAA,IAAI,EAAE,GAAR;AAAaC,QAAAA,MAAM,EAAE;AAAE,aAAGf,EAAE,CAACQ;AAAR;AAArB,OAAD,CAAJ;AACD,KAHD,MAGO;AACLV,MAAAA,UAAU,CAACE,EAAE,CAACQ,IAAJ,EAAUE,GAAV,CAAV;AACAR,MAAAA,IAAI;AACL;AACF,GATH,EAUGc,KAVH,CAUS,UAAAC,GAAG,EAAI;AACZ,QAAIA,GAAG,CAACN,IAAJ,KAAa,kBAAjB,EAAqC;AACnCO,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd,EADmC,CAChB;;AACnBf,MAAAA,IAAI,CAAC;AAAEY,QAAAA,IAAI,EAAE,GAAR;AAAaC,QAAAA,MAAM,EAAE;AAAE,aAAGf,EAAE,CAACQ;AAAR;AAArB,OAAD,CAAJ;AACD,KAHD,MAGO,IAAIS,GAAG,CAACN,IAAJ,KAAa,GAAb,IAAoBX,EAAE,CAACQ,IAAH,KAAYY,MAAM,CAACC,QAAP,CAAgBC,QAApD,EAA8D;AACnE;AACAF,MAAAA,MAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBvB,EAAE,CAACwB,QAA1B;AACD,KAHM,MAGA;AACLzB,MAAAA,WAAW,CAACkB,GAAD,EAAMjB,EAAN,CAAX;AACAE,MAAAA,IAAI,CAACe,GAAD,CAAJ;AACD;AACF,GArBH;AAsBD,CAjCD","sourcesContent":["import fetch from '../fetch'\nimport { getResults, setResults, formatError } from './shared'\n\nexport default (to, from, next) => {\n  if (process.isServer) return next()\n\n  if (process.isProduction && global.__INITIAL_STATE__) {\n    setResults(to.path, global.__INITIAL_STATE__)\n    global.__INITIAL_STATE__ = null\n    return next()\n  } else if (getResults(to.path)) {\n    return next()\n  }\n\n  fetch(to)\n    .then(res => {\n      if (res.code === 404) {\n        setResults(to.path, { data: null, context: {} })\n        next({ name: '*', params: { 0: to.path }})\n      } else {\n        setResults(to.path, res)\n        next()\n      }\n    })\n    .catch(err => {\n      if (err.code === 'MODULE_NOT_FOUND') {\n        console.error(err) // eslint-disable-line\n        next({ name: '*', params: { 0: to.path }})\n      } else if (err.code === 404 && to.path !== window.location.pathname) {\n        // reload page if coming from another page and data doesn't exist\n        window.location.assign(to.fullPath)\n      } else {\n        formatError(err, to)\n        next(err)\n      }\n    })\n}\n"]}]}